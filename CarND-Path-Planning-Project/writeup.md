# Path Planning Writeup

### The states

We currently have basically 3 states:

KL: Keep Lane: keep the same lane, avoiding collisions by maintaining a right speed (i.e the speed of the car ahead)

LCL - Lane Change Left: this state will perform a trajectory to the left lane

LRL - Lane change Right: this state will perform a trajectory to the right lane

LCL2 - Lane Change Left 2: this state will check for a trajectory of two lanes left, avoiding some waiting when we are on the 3rd lane (the right lane) and we have two cars at the same speed in the middle and the right.

LRL2 - This was not implemented due security concerns.

### State change

Our cost function simply calculates the difference of the top speed and the trajectory speed, thus giving us the trajectory with the best velocity.

In addiction, we penalize constant lane changing, so I implemented a "counter" to avoid a lane change just after another.

Just after a lane change we set our counter to 200 and decrement it each time the function is called.

### Trajectories

The trajectories are generated by considering the final position of the planned path. If we have some constraints that prevent some state to take action (for example, a car in our side), we simply returns a trajectory with very low (-900) velocity. This will penalize the cost and will keep this state far from being taken.

The functions getvehicleahead(), getvehiclebehind() and getvehiclearound() are responsible for returning the info of an existing car in the desired trajectory (left lane, right lane or the same lane).


### Improvements

I implemented a very simple state machine. Actually we could add one more state to "prepare" before lane changing, so the car would accelerate or breaks before an effectively lane changing.
The size of the planned path could be dinamic, i.e, we would change it to be very responsible when we are have a lot of car arounds and less responsive (larger path) when we dont have any vehicle around.
The speed controller are a lot simple and it could be very anoying for a person.
Another improvement could be a state to be more reactive to some dangerous scenarios, for example when some vehicle appear ahead unexpectedly. Yet, the getvehicle() functions could predict the change lane of the vehicles, avoiding collisions and desacelerations.

